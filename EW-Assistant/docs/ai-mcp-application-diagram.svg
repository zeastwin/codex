<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900" viewBox="0 0 1600 900" role="img" aria-labelledby="title desc">
  <title id="title">AI + MCP 智能应用闭环 | AI + MCP Closed Loop</title>
  <desc id="desc">PPT-ready minimal flow: 数据层, MCP 工具层, 规则与 LLM 推理层, 执行闭环层</desc>

  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f8fbff"/>
      <stop offset="100%" stop-color="#eef4ff"/>
    </linearGradient>

    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="9" markerHeight="9" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155"/>
    </marker>

    <style>
      .title { font: 700 44px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .sub { font: 500 18px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #334155; }
      .cardTitle { font: 700 26px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .chip { font: 600 14px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #1e293b; }
      .idx { font: 700 20px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #ffffff; }
      .flow { font: 600 14px 'Microsoft YaHei', 'PingFang SC', 'Segoe UI', Arial, sans-serif; fill: #475569; }
    </style>
  </defs>

  <rect x="0" y="0" width="1600" height="900" fill="url(#bg)"/>

  <!-- Feedback loop -->
  <path d="M 1410 650 C 1410 770, 190 770, 190 650 L 190 610" fill="none" stroke="#64748b" stroke-width="3" stroke-dasharray="10 8" marker-end="url(#arrow)"/>
  <text class="flow" x="800" y="790" text-anchor="middle">反馈闭环</text>

  <!-- Card 1: Data -->
  <rect x="115" y="290" width="280" height="330" rx="24" ry="24" fill="#dbeafe" stroke="#60a5fa" stroke-width="2.5"/>
  <circle cx="155" cy="325" r="18" fill="#2563eb"/>
  <text class="idx" x="155" y="332" text-anchor="middle">1</text>

  <circle cx="255" cy="380" r="42" fill="#ffffff" stroke="#93c5fd" stroke-width="2"/>
  <!-- database icon -->
  <ellipse cx="255" cy="365" rx="20" ry="8" fill="none" stroke="#1d4ed8" stroke-width="3"/>
  <path d="M235 365 V392 C235 396 244 400 255 400 C266 400 275 396 275 392 V365" fill="none" stroke="#1d4ed8" stroke-width="3"/>
  <path d="M235 379 C235 383 244 387 255 387 C266 387 275 383 275 379" fill="none" stroke="#1d4ed8" stroke-width="3"/>

  <text class="cardTitle" x="255" y="450" text-anchor="middle">数据层 | Data</text>

  <rect x="165" y="475" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="255" y="497" text-anchor="middle">Prod CSV | 产能</text>

  <rect x="165" y="519" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="255" y="541" text-anchor="middle">Alarm CSV | 报警</text>

  <rect x="165" y="563" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="255" y="585" text-anchor="middle">IO Map | 映射</text>

  <!-- Card 2: MCP -->
  <rect x="485" y="290" width="280" height="330" rx="24" ry="24" fill="#dcfce7" stroke="#4ade80" stroke-width="2.5"/>
  <circle cx="525" cy="325" r="18" fill="#16a34a"/>
  <text class="idx" x="525" y="332" text-anchor="middle">2</text>

  <circle cx="625" cy="380" r="42" fill="#ffffff" stroke="#86efac" stroke-width="2"/>
  <!-- tool icon -->
  <path d="M603 369 L617 355 L629 367 L615 381 Z" fill="none" stroke="#15803d" stroke-width="3"/>
  <rect x="626" y="374" width="23" height="10" rx="4" fill="none" stroke="#15803d" stroke-width="3"/>
  <path d="M651 369 L659 361" stroke="#15803d" stroke-width="3"/>

  <text class="cardTitle" x="625" y="450" text-anchor="middle">MCP 工具层 | Tools</text>

  <rect x="535" y="475" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="625" y="497" text-anchor="middle">Prod/Alarm | 查询</text>

  <rect x="535" y="519" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="625" y="541" text-anchor="middle">IO/Machine | 控制</text>

  <rect x="535" y="563" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="625" y="585" text-anchor="middle">JSON API | 接口</text>

  <!-- Card 3: Reasoning -->
  <rect x="855" y="290" width="280" height="330" rx="24" ry="24" fill="#fef9c3" stroke="#facc15" stroke-width="2.5"/>
  <circle cx="895" cy="325" r="18" fill="#ca8a04"/>
  <text class="idx" x="895" y="332" text-anchor="middle">3</text>

  <circle cx="995" cy="380" r="42" fill="#ffffff" stroke="#fde047" stroke-width="2"/>
  <!-- brain-ish icon -->
  <path d="M982 397 C971 394 968 381 974 373 C973 361 984 355 993 359 C1001 352 1015 355 1018 367 C1027 371 1028 383 1021 390 C1019 399 1007 403 999 398 C994 401 987 401 982 397 Z" fill="none" stroke="#a16207" stroke-width="3"/>
  <path d="M993 363 V395 M1006 366 V394" stroke="#a16207" stroke-width="2.5"/>

  <text class="cardTitle" x="995" y="450" text-anchor="middle">规则推理层 | Rules + LLM</text>

  <rect x="905" y="475" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="995" y="497" text-anchor="middle">Rules | 规则判定</text>

  <rect x="905" y="519" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="995" y="541" text-anchor="middle">Diagnosis | 分析</text>

  <rect x="905" y="563" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="995" y="585" text-anchor="middle">Actions | 建议</text>

  <!-- Card 4: Execution -->
  <rect x="1225" y="290" width="280" height="330" rx="24" ry="24" fill="#fee2e2" stroke="#f87171" stroke-width="2.5"/>
  <circle cx="1265" cy="325" r="18" fill="#dc2626"/>
  <text class="idx" x="1265" y="332" text-anchor="middle">4</text>

  <circle cx="1365" cy="380" r="42" fill="#ffffff" stroke="#fca5a5" stroke-width="2"/>
  <!-- robot arm icon -->
  <circle cx="1348" cy="392" r="6" fill="#b91c1c"/>
  <path d="M1354 390 L1372 374 L1386 384" fill="none" stroke="#b91c1c" stroke-width="4" stroke-linecap="round"/>
  <rect x="1378" y="380" width="16" height="10" rx="2" fill="none" stroke="#b91c1c" stroke-width="3"/>
  <rect x="1340" y="398" width="18" height="7" rx="2" fill="#b91c1c"/>

  <text class="cardTitle" x="1365" y="450" text-anchor="middle">执行闭环 | Closed Loop</text>

  <rect x="1275" y="475" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="1365" y="497" text-anchor="middle">Start / Pause / Reset</text>

  <rect x="1275" y="519" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="1365" y="541" text-anchor="middle">Clear Alarms | 消警</text>

  <rect x="1275" y="563" width="180" height="34" rx="17" fill="#ffffff"/>
  <text class="chip" x="1365" y="585" text-anchor="middle">Logs/Tickets | 记录</text>

  <!-- Flow arrows (render on top to avoid overlap) -->
  <line x1="395" y1="455" x2="485" y2="455" stroke="#334155" stroke-width="4" marker-end="url(#arrow)"/>
  <line x1="765" y1="455" x2="855" y2="455" stroke="#334155" stroke-width="4" marker-end="url(#arrow)"/>
  <line x1="1135" y1="455" x2="1225" y2="455" stroke="#334155" stroke-width="4" marker-end="url(#arrow)"/>

  <text class="flow" x="440" y="438" text-anchor="middle">接入</text>
  <text class="flow" x="810" y="438" text-anchor="middle">调用</text>
  <text class="flow" x="1180" y="438" text-anchor="middle">决策</text>
</svg>
